from collections import defaultdict
from itertools import combinations

def find_patterns_with_complexity(pitch_dict, min_len=1, max_len=3, min_frequency=1):
    """
    Finds all patterns of pitches, considering subsets of chords, and 
    sorts them by frequency, complexity, and length.

    Args:
        pitch_dict (dict): A dictionary where keys are times, and values are lists of pitches.
        min_len (int): Minimum pattern length to search for.
        max_len (int): Maximum pattern length to search for.
        min_frequency (int): Minimum frequency to include patterns in the output.

    Returns:
        list: A list of patterns sorted by frequency, complexity, and length.
    """
    # Convert to a sequence of times with subsets of chords
    sequence = []
    for time in sorted(pitch_dict.keys()):
        chord = pitch_dict[time]
        subsets = []
        for r in range(1, len(chord) + 1):
            subsets.extend(combinations(chord, r))
        sequence.append(list(map(tuple, subsets)))

    # Flatten the sequence to allow pattern analysis
    flattened_sequence = []
    for chord_subsets in sequence:
        flattened_sequence.extend(chord_subsets)

    # Search for patterns
    pattern_counts = defaultdict(int)
    pattern_complexity = defaultdict(int)  # Track the complexity of patterns
    for start in range(len(flattened_sequence)):
        for length in range(min_len, max_len + 1):
            if start + length <= len(flattened_sequence):
                pattern = tuple(flattened_sequence[start:start + length])
                pattern_counts[pattern] += 1
                # Compute the complexity: sum of chord lengths in the pattern
                pattern_complexity[pattern] = sum(len(chord) for chord in pattern)

    # Filter and sort patterns
    sorted_patterns = sorted(
        ((pattern, count) for pattern, count in pattern_counts.items() if count >= min_frequency),
        key=lambda item: (
            -item[1],  # Frequency (descending)
            -sum(len(chord) for chord in item[0]),  # Complexity (descending)
            -len(item[0])  # Pattern length (descending)
        )
    )

    return sorted_patterns

def midi_to_letter_notes(midi_pitches):
    """
    Converts a list of MIDI pitch numbers to their corresponding letter notes.
    
    Args:
        midi_pitches (list): A list of MIDI pitch numbers.
    
    Returns:
        list: A list of corresponding letter notes (e.g., ['C4', 'G#3']).
    """
    # Mapping of MIDI note numbers to letter notes
    note_names = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B']

    letter_notes = []
    for pitch in midi_pitches:
        # Compute octave and note name
        note = note_names[pitch % 12]
        octave = (pitch // 12) - 1  # MIDI defines middle C (C4) as 60
        letter_notes.append(f"{note}{octave}")
    
    return letter_notes

    # # Example usage
    # midi_pitches = [54, 78, 73, 69, 56, 71, 57, 61, 68]
    # letter_notes = midi_to_letter_notes(midi_pitches)
    # print("Converted letter notes:", letter_notes)

def example():
    # Example input: simplified dictionary of pitches at each time
    simplified = {
        0: [54, 78], 240: [73], 720: [69], 840: [56, 71], 960: [57, 73], 1040: [71], 1120: [69], 1200: [61, 71], 1280: [69], 1360: [68], 1440: [54, 69], 1560: [71], 1680: [57, 69], 1800: [68], 1920: [61, 69], 2040: [73], 2160: [66, 78], 2280: [80], 2400: [81], 2480: [80], 2560: [78], 2640: [65, 80], 2720: [78], 2800: [77], 2880: [66, 78], 3000: [73], 3120: [56, 61], 3240: [77], 3360: [57, 78], 3480: [73], 3600: [57, 59], 3720: [59, 77], 3840: [57, 61, 78], 3920: [59], 3960: [73], 4000: [57], 4080: [56, 59, 78], 4160: [57], 4200: [80], 4240: [56], 4320: [54, 57, 81], 4440: [77], 4560: [52, 59, 78], 4680: [81], 4800: [49, 61, 71], 4920: [81], 5040: [68, 80], 5160: [81], 5280: [66, 83], 5360: [81], 5440: [80], 5520: [65, 81], 5600: [80], 5680: [78], 5760: [49, 66, 77], 5880: [72], 6000: [61], 6120: [73], 6240: [54, 78], 6360: [72], 6480: [53], 6600: [73], 6720: [54, 80], 6800: [71], 6880: [73], 6960: [59, 74], 7040: [73], 7120: [71], 7200: [69], 7440: [56], 7680: [57], 7760: [68], 7840: [66], 7920: [54, 65], 8000: [66], 8080: [68], 8160: [53, 66], 8240: [65], 8320: [66], 8400: [48, 75], 8560: [66], 8640: [49, 66], 8720: [53], 8800: [54], 8880: [56], 8960: [54], 9000: [65], 9040: [53], 9060: [63], 9120: [54, 65], 9200: [56, 61], 9280: [57, 63], 9360: [49, 59, 65], 9440: [57, 66], 9520: [56, 68], 9600: [51, 66], 9680: [65], 9760: [66], 9840: [53, 68], 9920: [69], 10000: [71], 10080: [54, 57, 69], 10140: [68], 10200: [56, 66], 10260: [54], 10320: [42, 56], 10440: [69], 10500: [73], 10560: [45, 78], 10640: [73], 10720: [75], 10800: [49, 77], 10880: [78], 10960: [80], 11040: [54, 81], 11120: [80], 11200: [78], 11280: [80], 11360: [78], 11440: [76], 11520: [76], 11580: [75], 11640: [76], 11760: [51, 78], 12000: [48], 12120: [76], 12240: [75], 12360: [81], 12480: [80], 12560: [78], 12640: [76], 12720: [44, 59, 78], 12800: [76], 12880: [75], 12960: [49, 57, 76], 13080: [75], 13200: [73], 13320: [47, 57], 13440: [45, 56], 13560: [75], 13680: [44, 54, 73], 13800: [72], 13920: [42, 52, 73], 14040: [76], 14160: [51, 69], 14280: [68], 14400: [49, 69], 14520: [72], 14640: [44, 66], 14760: [64], 14880: [45, 66], 15000: [72], 15120: [42, 73], 15240: [75], 15360: [44, 76], 15440: [75], 15520: [73], 15600: [49, 75], 15680: [73], 15760: [72], 15840: [49, 54, 73], 16080: [68], 16560: [64], 16680: [51, 66], 16800: [52, 68], 16880: [66], 16960: [64], 17040: [54, 56, 66], 17120: [64], 17200: [63], 17280: [49, 64], 17400: [66], 17520: [52, 64], 17640: [63], 17760: [56, 64], 17880: [68], 18000: [61, 73], 18120: [47, 75], 18240: [46, 76], 18320: [79], 18400: [78], 18480: [49, 60, 76], 18560: [74], 18640: [73], 18720: [42, 61, 71], 18800: [70], 18880: [73], 18960: [56, 64], 19020: [66], 19080: [64], 19140: [63], 19200: [64], 19320: [54, 64], 19440: [49, 52], 19560: [70], 19680: [46, 71], 19800: [73], 19920: [42, 52], 20160: [47, 49, 62], 20280: [64], 20400: [54, 62], 20520: [61], 20640: [62], 20760: [66], 20880: [50, 71], 21000: [73], 21120: [47, 74], 21200: [78], 21240: [50], 21280: [76], 21360: [44, 74], 21440: [73], 21480: [47], 21520: [71], 21600: [40, 69], 21680: [68], 21760: [71], 21840: [54, 62], 21900: [64], 21960: [62], 22020: [61], 22080: [59, 62], 22200: [54, 62], 22320: [47], 22440: [54, 68], 22560: [44, 69], 22680: [50, 71], 22800: [40], 23040: [45, 47, 61], 23160: [62], 23280: [52, 61], 23400: [59], 23520: [61], 23640: [64], 23760: [69], 23880: [71], 24000: [73], 24120: [52], 24240: [49], 24360: [45], 24480: [50], 24600: [67], 24720: [52, 66], 24840: [64], 24960: [57, 66], 25080: [69], 25200: [54, 56, 74], 25320: [76], 25440: [51, 57, 78], 25680: [47], 25920: [52], 26040: [69], 26160: [57, 68], 26280: [66], 26400: [62, 68], 26520: [71], 26640: [57, 76], 26760: [80], 26880: [83], 27000: [57, 74], 27120: [52, 73], 27240: [51, 71], 27360: [45, 56, 73], 27480: [78], 27600: [47, 59, 76], 27720: [75], 27840: [49, 64, 76], 27960: [73], 28080: [50, 59, 71], 28200: [69], 28320: [52, 56, 73], 28560: [52, 71], 28800: [57, 57, 61], 28920: [64], 29040: [56, 69], 29160: [52], 29280: [49, 56], 29400: [45, 57, 64], 29520: [49, 69], 29640: [52, 59, 71], 29760: [57, 73], 29880: [57, 69], 30000: [66], 30120: [56, 75], 30240: [55, 57, 76], 30360: [71], 30480: [54], 30600: [75], 30720: [52, 76], 30840: [71], 30960: [55], 31080: [75], 31200: [49, 73, 76], 31320: [64, 71], 31440: [54, 60, 70, 71], 31560: [62, 76], 31680: [59, 59, 76], 31740: [74], 31800: [73], 31920: [57, 71], 32040: [54], 32160: [50, 55], 32280: [47, 66], 32400: [50, 59, 71], 32520: [54, 73], 32640: [59, 61, 74], 32760: [71], 32880: [68], 33000: [77], 33120: [57, 59, 78], 33240: [73], 33360: [56], 33480: [77], 33600: [54, 78], 33720: [73], 33840: [57], 33960: [77], 34080: [51, 78], 34200: [73], 34320: [56, 62, 72], 34440: [78], 34560: [61, 61, 78], 34620: [76], 34680: [75], 34800: [59, 73], 34920: [56], 35040: [52, 57], 35160: [49, 68], 35280: [52, 61, 73], 35400: [56, 75], 35520: [63, 76], 35640: [73], 35760: [52, 70], 35880: [79], 36000: [50, 61, 78], 36120: [74], 36240: [71], 36360: [70], 36480: [71], 36600: [66], 36720: [71], 36840: [74], 36960: [61, 78], 37080: [74], 37200: [51, 72], 37320: [81], 37440: [52, 80], 37560: [76], 37680: [54, 73], 37800: [72], 37920: [50, 73], 38040: [47, 68], 38160: [50, 73], 38280: [54, 76], 38400: [59, 80], 38520: [77], 38640: [53, 54, 74], 38760: [83], 38880: [54, 61, 81], 39000: [78], 39120: [56], 39240: [77], 39360: [52, 78], 39480: [49, 74], 39600: [52, 52], 39720: [56, 73], 39840: [51, 61, 73], 39960: [72], 40080: [50, 56], 40200: [78], 40320: [49, 54, 78], 40560: [56, 77], 40800: [57], 41040: [47, 56], 41120: [49], 41200: [50], 41280: [49, 54], 41360: [47], 41440: [45], 41520: [47, 56], 41600: [45], 41680: [44], 41760: [54, 57, 78], 42000: [56, 73], 42360: [56], 42480: [57, 69], 42600: [71], 42720: [61, 73], 42800: [71], 42840: [71], 42880: [69], 42960: [71], 43040: [69], 43120: [68], 43200: [54, 69, 73], 43320: [71], 43440: [57, 69], 43560: [68], 43680: [61, 69], 43800: [73], 43920: [66, 78], 44040: [80], 44160: [81], 44240: [80], 44320: [78], 44400: [65, 80], 44480: [78], 44560: [77], 44640: [66, 78], 44760: [73], 44880: [56, 61], 45000: [77], 45120: [57, 78], 45240: [73], 45360: [56, 57], 45480: [59, 77], 45600: [54, 61, 78], 45680: [59], 45720: [74], 45760: [57], 45840: [52, 59, 73], 45920: [57], 45960: [82], 46000: [56], 46080: [50, 57, 83], 46200: [78], 46320: [49, 59], 46440: [82], 46560: [50, 61, 83], 46680: [78], 46800: [52, 59], 46920: [82], 47040: [50, 57, 83], 47120: [81], 47200: [80], 47280: [49, 55, 81], 47360: [80], 47440: [78], 47520: [47, 54, 79], 47640: [74], 47760: [52, 59], 47880: [78], 48000: [54, 59, 79], 48120: [74], 48240: [59, 61], 48360: [78], 48480: [54, 59, 79], 48720: [59, 81], 48960: [59, 59, 77], 49040: [78], 49120: [80], 49200: [62, 78], 49280: [77], 49360: [75], 49440: [62, 73], 49520: [71], 49600: [73], 49680: [53, 62, 74], 49760: [73], 49840: [71], 49920: [54, 62, 69], 50000: [71], 50080: [73], 50160: [49, 62, 71], 50240: [69], 50320: [68], 50400: [50, 61, 66], 50520: [77], 50760: [78], 50880: [68], 51000: [78], 51120: [50, 56], 51240: [77], 51360: [49, 61, 70], 51480: [76], 51600: [55], 51720: [75], 51840: [54, 75], 51920: [76], 52000: [78], 52080: [61, 76], 52160: [75], 52240: [73], 52320: [59, 72], 52400: [73], 52480: [75], 52560: [52, 73], 52640: [72], 52720: [70], 52800: [68], 52880: [66], 52960: [68], 53040: [51, 58, 69], 53120: [68], 53200: [66], 53280: [49, 60, 65], 53360: [66], 53440: [68], 53520: [51, 61, 66], 53600: [65], 53680: [63], 53760: [53, 61, 63], 54000: [54, 56], 54240: [56, 58], 54360: [65], 54420: [68], 54480: [44, 60, 71], 54600: [74], 54720: [45, 59, 73], 54800: [75], 54880: [77], 54960: [57, 78], 55040: [76], 55120: [74], 55200: [56, 73], 55280: [71], 55360: [69], 55440: [47, 57, 74], 55520: [73], 55600: [71], 55680: [49, 59, 69], 55760: [68], 55840: [66], 55920: [47, 53, 68], 56000: [66], 56080: [65], 56160: [46, 54, 66], 56400: [49, 54], 56640: [47, 54], 56880: [49], 57120: [50], 57240: [65], 57360: [47, 53], 57480: [66], 57600: [49, 74], 57680: [64], 57720: [72], 57760: [62], 57840: [61], 57920: [62], 57960: [73], 58000: [64], 58080: [62, 65], 58160: [61], 58200: [71], 58240: [59], 58320: [50, 58], 58400: [59], 58440: [69], 58480: [61], 58560: [47, 59, 68], 58640: [71], 58720: [69], 58800: [49, 57, 68], 58880: [66], 58960: [65], 59040: [45, 53, 56, 66], 59120: [68], 59200: [69], 59280: [44, 54, 57, 71], 59360: [73], 59440: [74], 59520: [45, 56, 59, 61], 59760: [54, 66], 60120: [66], 60240: [37, 52], 60360: [65], 60480: [42, 49, 66], 60720: [53], 60960: [53], 61040: [54], 61120: [52], 61200: [50, 56], 61280: [49], 61360: [47], 61440: [57], 61680: [59], 61920: [49, 58], 64560: [61], 64800: [57], 65040: [54], 65280: [62], 66000: [61], 66120: [59], 66240: [61], 66960: [66], 67200: [59], 67920: [57], 68040: [56], 68160: [57], 68400: [54, 66], 68640: [57, 64], 68700: [56], 68760: [57], 68820: [56], 68880: [57, 61], 68940: [56], 69000: [57], 69060: [56], 69120: [57, 69], 69180: [56], 69240: [57], 69300: [56], 69360: [57], 69420: [56], 69480: [57], 69540: [56], 69600: [54], 69840: [56, 68], 69960: [66], 70080: [57, 68], 70320: [59], 70560: [61], 70800: [73], 71040: [66], 71280: [63], 71520: [64], 71760: [64], 71880: [63], 72000: [64], 72240: [61, 64], 72480: [58, 64], 72540: [63], 72600: [64], 72660: [63], 72720: [64], 72780: [63], 72840: [64], 72900: [63], 72960: [64], 73020: [63], 73080: [64], 73140: [63], 73200: [60, 64], 73260: [63], 73320: [64], 73380: [63], 73440: [61, 61], 73680: [73], 73920: [66], 74160: [61], 74640: [60, 71], 74760: [58], 74880: [60, 64], 75120: [56], 75360: [64], 75600: [69], 76080: [57, 68], 76320: [62], 76560: [66], 77040: [49, 56, 65], 77280: [45, 61, 66], 77520: [42], 77760: [50, 59], 78000: [71], 78240: [57, 68], 78480: [49, 64], 78600: [47], 78720: [49, 56], 78960: [69], 79200: [54, 66], 79440: [54, 63], 79680: [47], 79920: [68], 80160: [65], 80400: [45, 61], 80520: [44], 80640: [45, 52, 66], 80880: [42], 81120: [45, 57], 81180: [44], 81240: [45], 81300: [44], 81360: [45], 81420: [44], 81480: [45], 81540: [44], 81600: [45, 62, 65], 81660: [44], 81720: [45], 81780: [44], 81840: [45, 59], 81900: [44], 81960: [45], 82020: [44], 82080: [42, 56, 66], 82320: [69], 82560: [50, 71], 82800: [57, 74], 83040: [59], 83280: [62, 68], 83520: [49, 69], 83760: [56, 73], 84000: [47, 57], 84240: [61, 66], 84360: [68], 84480: [69], 84540: [68], 84600: [69], 84660: [68], 84720: [52, 54, 69], 84780: [68], 84840: [66], 84900: [68], 84960: [49, 56, 69], 85200: [45, 59], 85440: [54], 85680: [57, 75], 85920: [62, 72], 86160: [68], 86400: [52, 59], 86640: [73], 86880: [51, 64, 78], 87120: [61], 87360: [63, 75], 87600: [56, 66], 87840: [52, 80], 88080: [49, 60, 76], 88320: [57, 61, 78], 88560: [64, 81], 89040: [58, 74], 89160: [60], 89280: [56, 61, 76], 89340: [60], 89400: [61], 89460: [60], 89520: [61, 80], 89580: [60], 89640: [58], 89700: [60], 89760: [61], 90000: [49, 73], 90240: [54, 71], 90480: [66, 69], 90720: [62, 68], 90960: [59], 91200: [53], 91440: [64, 73], 91680: [54, 61, 69], 91920: [57, 57, 66], 92160: [59, 74], 92400: [61, 62], 92640: [56, 59], 92880: [52, 57, 73], 93000: [71], 93120: [57, 57, 73], 93180: [56], 93240: [57], 93300: [56], 93360: [57, 61], 93420: [56], 93480: [57], 93540: [56], 93600: [54, 54], 93840: [51, 78], 94080: [56, 71], 94320: [59, 71], 94560: [53, 64], 94800: [49, 69], 94920: [68], 95040: [54, 69], 95280: [57, 64, 66], 95520: [59, 68, 69], 95760: [56], 96000: [61], 96240: [59, 68], 96360: [66], 96480: [58, 66, 68], 96720: [54, 65], 96960: [59, 66], 97200: [57, 71], 97440: [56], 97680: [52, 64, 68], 97800: [63], 97920: [54, 64, 69], 98160: [57, 73], 98400: [50, 64, 66], 98640: [47, 62], 98760: [61], 98880: [52, 62, 68], 99120: [40], 99360: [45, 69], 99600: [57], 99840: [57, 61], 99900: [56], 99960: [57], 100020: [56], 100080: [57], 100140: [56], 100200: [54], 100320: [53], 100560: [49, 62], 100800: [54, 61], 101040: [64], 101280: [61], 101520: [74], 101760: [53, 74], 101820: [73], 101880: [74], 101940: [73], 102000: [52, 74], 102060: [73], 102120: [71], 102240: [70], 102480: [50, 61, 66], 102720: [49, 61, 71], 102780: [59], 102840: [61], 102900: [59], 102960: [47, 61], 103020: [59], 103080: [57], 103200: [52, 56], 103440: [49], 103680: [54, 70], 103920: [42, 61, 69], 104160: [47, 54], 104400: [66, 71], 104640: [66, 71], 104700: [64, 69], 104760: [66, 71], 104820: [64, 69], 104880: [49, 66, 71], 104940: [64, 69], 105000: [62, 68], 105120: [45, 61, 66], 105360: [61, 67], 105600: [61, 67], 105660: [59, 66], 105720: [61, 67], 105780: [61, 66], 105840: [59, 67], 105900: [61, 66], 105960: [57, 64], 106080: [56, 63, 64], 106320: [52, 59], 106560: [57, 64], 106800: [69], 107040: [71], 107520: [56, 63], 107760: [52, 62, 68], 108000: [57, 73], 108240: [61], 108360: [59], 108480: [61], 108720: [54, 66, 69], 108960: [59, 62, 74], 109200: [59], 109440: [64], 109680: [56], 109920: [61], 110160: [62, 74], 110400: [66, 74], 110460: [73], 110520: [74], 110580: [73], 110640: [74], 110700: [73], 110760: [71], 110880: [69], 111120: [61, 69], 111360: [59, 69, 78], 111420: [68], 111480: [69], 111540: [68], 111600: [69], 111660: [68], 111720: [57, 66], 111840: [56, 64], 112080: [71, 76], 112320: [58, 69, 76], 112380: [74], 112440: [76], 112500: [74], 112560: [68, 76], 112620: [74], 112680: [73], 112800: [59, 66, 74], 113040: [64, 71], 113280: [55, 62, 76], 113520: [61], 113760: [54, 59], 114000: [78], 114240: [66, 74], 114480: [55, 71], 114720: [52, 73], 114960: [49, 62], 115200: [54, 62], 115260: [61], 115320: [62], 115380: [61], 115440: [62, 70], 115500: [61], 115560: [59], 115680: [58, 71], 115920: [54, 74], 116160: [52, 59, 74], 116220: [73], 116280: [74], 116340: [73], 116400: [50, 74], 116460: [73], 116520: [71], 116640: [49, 69], 116880: [45], 117120: [50, 58], 117360: [49, 66, 74], 117600: [47, 62, 67], 117840: [50, 59], 118080: [50, 67], 118140: [49], 118200: [50], 118260: [49], 118320: [50, 73], 118380: [49], 118440: [47], 118560: [46], 118800: [42, 66], 118920: [64], 119040: [47, 66], 119520: [66], 119760: [45, 65, 71], 119880: [44], 120000: [45, 64, 66], 120240: [69], 120480: [63], 120720: [44, 62, 66], 120840: [42, 61], 120960: [44, 62, 71], 121200: [40, 59], 121440: [49, 61], 121680: [37, 69], 121800: [68], 121920: [49, 69], 122160: [73], 122400: [59, 66], 122640: [47, 69], 122760: [45], 122880: [47, 74], 123120: [44, 68], 123360: [41, 64], 123600: [56, 74], 123840: [53, 74], 123900: [73], 123960: [74], 124020: [73], 124080: [49, 74], 124140: [73], 124200: [71], 124320: [54, 62, 69], 124560: [56], 124800: [57], 125040: [54, 71], 125280: [56, 68], 125520: [44, 65, 68], 125640: [66], 125760: [68], 126000: [56, 63, 68], 126240: [52, 64], 126480: [49, 66, 76], 126600: [65], 126720: [57, 66, 76], 126780: [75], 126840: [76], 126900: [75], 126960: [63, 76], 127020: [75], 127080: [73], 127200: [60, 72], 127440: [56, 78], 127560: [54], 127680: [56, 76], 127920: [75], 128160: [61, 76], 128400: [61], 128640: [54], 128880: [75], 129000: [73], 129120: [80], 129360: [52, 72, 75], 129480: [51], 129600: [52, 73, 75], 129660: [73], 129720: [75], 129780: [73], 129840: [49, 75], 129900: [73], 129960: [72], 130080: [51, 73], 130320: [71], 130560: [56, 69, 72], 130800: [66], 131040: [49, 60, 73], 131280: [63], 131520: [56], 131760: [68, 73], 132000: [66, 71], 132120: [68, 73], 132240: [66, 71], 132360: [64, 69], 132480: [66, 71], 132600: [64, 69], 132720: [63, 68], 132840: [64, 71], 132960: [64, 69], 133080: [66, 71], 133200: [64, 69], 133320: [63, 68], 133440: [64, 69], 133560: [63, 68], 133680: [54, 61, 66], 133800: [64, 69], 133920: [52, 63, 68], 134040: [54], 134160: [52, 68, 73], 134280: [50], 134400: [52, 61, 66], 134520: [50], 134640: [49, 65, 70], 134760: [52], 134880: [50, 66, 71], 135000: [52, 62], 135120: [50, 61, 66], 135240: [49, 59], 135360: [50, 61, 71], 135480: [49, 57], 135600: [47, 62], 135720: [50], 135840: [49], 136080: [42, 56], 136320: [54, 58, 69], 136560: [57, 61], 136800: [47, 54], 137040: [59], 137280: [52, 68], 137520: [56, 66], 137760: [45, 64], 137880: [66], 138000: [44, 64], 138120: [63], 138240: [45, 64, 66], 138360: [63], 138480: [57, 61], 138600: [64], 138720: [56, 63, 68], 138840: [57, 64], 138960: [56, 63, 72], 139080: [54, 61], 139200: [56, 63, 73], 139320: [54, 61], 139440: [52, 60, 76], 139560: [56, 63], 139680: [54, 61], 139800: [56, 63], 139920: [54, 61, 76], 140040: [52, 60], 140160: [54, 61, 75], 140280: [52, 64], 140400: [51, 63, 78], 140520: [54, 61], 140640: [52, 60], 140760: [54], 140880: [52, 63, 72], 141000: [51], 141120: [52, 64, 73], 141240: [51], 141360: [49, 68], 141480: [52], 141600: [43], 141840: [46, 67, 68], 142080: [47, 66, 68], 142320: [52, 69], 142560: [46, 68], 142800: [49, 70], 142920: [66], 143040: [51, 63, 68], 143280: [39, 67, 70], 143520: [44, 63, 68], 143640: [64], 143760: [56, 63], 143880: [54, 61], 144000: [56, 63], 144120: [61, 69], 144240: [49, 59, 71], 144360: [63, 68], 144480: [42, 61, 69], 144600: [63, 71], 144720: [54, 61, 69], 144840: [52, 59, 68], 144960: [54, 61, 69], 145080: [59, 68], 145200: [47, 58, 66], 145320: [61, 69], 145440: [52, 59, 68], 145560: [54, 61, 69], 145680: [56, 63, 71], 145800: [52, 59, 68], 145920: [57, 64, 73], 146040: [59], 146160: [61], 146280: [57], 146400: [62], 146520: [64], 146640: [62, 73], 146760: [61], 146880: [62, 63, 71], 147000: [61], 147120: [59], 147240: [62], 147360: [61, 64], 147480: [62, 71], 147600: [61, 69], 147720: [59, 68], 147840: [61, 69], 147960: [59, 71, 71], 148080: [57, 69, 73], 148200: [61, 68, 69], 148320: [59, 66, 74], 148440: [76], 148560: [74], 148680: [73], 148800: [74], 148920: [73], 149040: [64, 66, 71], 149160: [74], 149280: [57, 64, 73], 149400: [74], 149520: [73], 149640: [71], 149760: [73], 149880: [71], 150000: [62, 69], 150120: [73], 150240: [56, 71], 150480: [59, 69], 150720: [53, 68], 150960: [49], 151200: [54, 68], 151320: [68], 151440: [61, 70], 151560: [71], 151680: [66, 70], 151800: [71], 151920: [54, 73], 152040: [70], 152160: [55, 71], 152280: [69, 70], 152400: [68, 71], 152520: [66, 73], 152640: [68, 71], 152760: [66, 73], 152880: [56, 65, 74], 153000: [68, 71], 153120: [57, 66, 73], 153240: [71], 153360: [61, 73], 153480: [74], 153600: [62, 73], 153720: [74], 153840: [58, 76], 153960: [73], 154080: [59, 74], 154200: [76], 154320: [54, 63, 74], 154440: [73], 154560: [47, 64, 74], 154680: [73], 154800: [50, 71], 154920: [74], 155040: [52, 67], 155280: [54, 65], 155520: [55, 66], 155760: [52], 156000: [49], 156120: [67], 156240: [45, 66], 156360: [64], 156480: [50, 66], 156600: [64], 156720: [42, 62], 156840: [66], 156960: [43, 59], 157080: [66], 157200: [47, 64], 157320: [62], 157440: [40, 61, 64], 157560: [62], 157680: [45, 61], 157800: [64], 157920: [50, 57, 62], 158040: [49], 158160: [50, 66], 158280: [52], 158400: [50, 71], 158520: [55], 158640: [54], 158760: [55], 158880: [49], 159000: [47, 57], 159120: [49, 55, 70], 159240: [50, 54, 68], 159360: [49, 55, 70], 159480: [54, 54], 159600: [52, 52], 159720: [54, 55], 159840: [47, 54, 71], 159960: [49], 160080: [50], 160200: [47], 160320: [52], 160440: [50], 160560: [49, 59, 76], 160680: [47], 160800: [49, 64, 69], 160920: [52], 161040: [50], 161160: [49], 161280: [50], 161400: [52], 161520: [54, 66, 74], 161640: [50], 161760: [52, 62, 67], 161880: [50], 162000: [52, 59], 162120: [54], 162240: [55, 67], 162360: [54], 162480: [52, 72], 162600: [55], 162720: [54, 70], 162840: [56], 162960: [58, 66], 163080: [54, 64], 163200: [59, 66], 163320: [47, 71], 163440: [59, 73], 163560: [74], 163680: [65, 66], 163800: [57], 163920: [56, 71, 73], 164040: [59], 164160: [57, 64, 66], 164280: [56], 164400: [54], 164520: [57], 164640: [56], 164760: [57], 164880: [56, 62, 65], 165000: [54, 61, 66], 165120: [53, 62, 68], 165240: [54, 69], 165360: [56, 59, 71], 165480: [53, 68], 165600: [54, 61, 71], 165720: [69], 165840: [56, 68], 165960: [57, 66], 166080: [59, 74], 166200: [57], 166320: [56], 166440: [54], 166560: [52, 59], 166680: [54], 166800: [52, 73], 166920: [50, 71], 167040: [52, 73], 167160: [50], 167280: [49], 167400: [52], 167520: [50, 73], 167640: [52], 167760: [50, 78], 167880: [49], 168000: [50, 71], 168120: [49], 168240: [47, 71], 168360: [50, 69], 168480: [49, 68], 168600: [50], 168720: [49, 69], 168840: [47, 68], 168960: [49, 69], 169080: [47, 71], 169200: [45, 66, 69], 169320: [49, 68], 169440: [47, 66, 68], 169560: [49], 169680: [47, 69], 169800: [45], 169920: [47, 69], 169980: [68], 170040: [45, 69], 170100: [68], 170160: [44, 69], 170220: [68], 170280: [47, 66], 170400: [45, 65], 170520: [44], 170640: [42, 61, 73], 170760: [44], 170880: [45, 66, 78], 171000: [47], 171120: [49, 81], 171240: [51], 171360: [52, 66, 80], 171480: [51], 171600: [49], 171720: [51], 171840: [52, 65], 171960: [54], 172080: [56], 172200: [58], 172320: [60, 66], 172440: [58], 172560: [60, 81], 172680: [61], 172800: [60, 80], 172920: [61], 173040: [63, 78], 173160: [60], 173280: [61, 76], 173400: [63], 173520: [64, 68], 173640: [63], 173760: [61, 73], 173880: [59], 174000: [57, 76], 174120: [56], 174240: [54, 75], 174360: [52], 174480: [54, 76], 174600: [56], 174720: [54], 174840: [56], 174960: [57, 78], 175080: [54], 175200: [56, 72, 75], 175320: [54], 175440: [56, 68], 175560: [57], 175680: [56, 73], 175800: [54], 175920: [52, 71, 75], 176040: [51], 176160: [52, 68, 69], 176400: [49], 176640: [57], 176880: [73], 177120: [71], 177240: [73], 177360: [56, 63, 71], 177480: [54, 69], 177600: [56, 68, 71], 177720: [69], 177840: [66, 68], 177960: [71], 178080: [69], 178200: [66, 71], 178320: [61, 64, 69], 178440: [63, 68], 178560: [54, 61, 69], 178680: [63, 68], 178800: [64, 66], 178920: [61, 69], 179040: [63, 68], 179160: [69], 179280: [52, 68], 179400: [51, 66], 179520: [52, 68], 179640: [66], 179760: [49, 64, 64], 179880: [68], 180000: [51, 61, 66], 180120: [68], 180240: [66], 180360: [64, 64], 180480: [64, 66], 180540: [63], 180600: [64, 64], 180660: [63], 180720: [63, 64], 180780: [63], 180840: [61, 66], 180960: [49, 60, 64], 181080: [48], 181200: [49, 56], 181320: [51], 181440: [52, 61], 181560: [54], 181680: [55], 181800: [52], 181920: [54], 182040: [55], 182160: [54, 67], 182280: [52], 182400: [50, 60, 66], 182520: [49], 182640: [47, 64], 182760: [46], 182880: [47, 61, 62], 183000: [42], 183120: [47, 56], 183240: [49], 183360: [50, 61], 183480: [52], 183600: [54, 64], 183720: [50], 183840: [52, 58], 183960: [54], 184080: [52, 66], 184200: [52], 184320: [49, 59, 64], 184440: [47], 184560: [45, 61, 62], 184680: [44], 184800: [45, 61], 184920: [40], 185040: [45, 54], 185160: [47], 185280: [49, 59], 185400: [50], 185520: [52, 61, 62], 185640: [49], 185760: [50, 56, 66], 185880: [52], 186000: [50], 186120: [49], 186240: [47, 57], 186360: [45], 186480: [44, 59, 65], 186600: [42, 66], 186720: [41, 68], 186960: [37, 57, 66], 187080: [56, 68], 187200: [42, 57, 69], 187920: [59], 188040: [61], 188160: [41, 62], 188400: [73], 188640: [42, 69], 188760: [54, 61], 188880: [56, 63, 66], 189000: [57, 65], 189120: [59, 66, 74], 189240: [61, 68], 189360: [59, 69], 189480: [57, 66], 189600: [56, 71], 189720: [73], 189840: [73, 74], 189960: [71, 71], 190080: [71, 73], 190200: [69], 190320: [58, 68], 190440: [69], 190560: [59, 66], 190800: [78], 190920: [57], 191040: [56, 71], 191280: [66], 191400: [54], 191520: [53, 64], 191640: [66], 191760: [49, 64, 69], 191880: [62, 68], 192000: [54, 64, 69], 192120: [62], 192240: [61, 66], 192360: [64], 192480: [62, 68], 192600: [64], 192720: [62], 192840: [61], 192960: [53, 62], 193080: [61], 193200: [59], 193320: [62], 193440: [54, 61], 193560: [62, 66], 193680: [50, 61], 193800: [59, 65], 193920: [45, 61], 194040: [59, 66], 194160: [47, 57], 194280: [61, 68], 194400: [49, 59, 61], 194520: [61], 194640: [59, 66], 194760: [57], 194880: [37, 59], 195000: [57], 195120: [56, 65], 195240: [59], 195360: [42, 57, 66], 195600: [59], 195840: [61], 196080: [62], 196320: [57], 196800: [56], 197280: [54]}

    # Parameters
    min_pattern_length = 3
    max_pattern_length = 20
    min_frequency = 5

    # Find and sort patterns
    patterns = find_patterns_with_complexity(
        simplified, min_len=min_pattern_length, max_len=max_pattern_length, min_frequency=min_frequency
    )
    # Output the result
    print("Patterns sorted by frequency, complexity, and length (above frequency threshold):")
    for pattern, frequency in patterns:
        complexity = sum(len(chord) for chord in pattern)
        print(f"Pattern: {pattern}, Frequency: {frequency}, Complexity: {complexity}")

